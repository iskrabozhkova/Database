use pc;

--1
select model, code, screen
from laptop
where screen = '15' or screen = '11'

--2

select distinct pc.model
from pc join product p on p.model = pc.model
	join (select l.price, p.maker
			from laptop l join product p on p.model = l.model) t on t.maker = p.maker
group by pc.model, pc.price, t.price
having t.price > pc.price
order by pc.model;

--3
select t1.model, t1.price
from (select p.maker, pc.model, avg(pc.price) as price
	  from pc
	  join product p on p.model = pc.model
	  group by pc.model, p.maker) t1
join (select p.maker, min(l.price) as price
	  from laptop l
	  join product p on p.model = l.model
	  group by p.maker) t2 on t1.maker = t2.maker 
where t1.price < t2.price
order by price desc;

--4
SELECT t1.code, t1.maker, COUNT(t2.code) AS num_pc_higher_price 
FROM (SELECT code, maker, price 
	  FROM pc JOIN product on pc.model = product.model) t1, (SELECT code, model, price AS price 
															                             FROM pc) t2 
	  WHERE t1.price <= t2.price 
GROUP BY t1.code,t1.maker;
